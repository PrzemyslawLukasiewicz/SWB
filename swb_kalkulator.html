<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SWB – Kalkulator wyników (manualny)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; line-height: 1.35; }
    h1 { font-size: 20px; margin-bottom: 8px; }
    .muted { opacity: .8; font-size: 13px; }
    .card { border: 1px solid #ccc; border-radius: 12px; padding: 14px; margin-bottom: 16px; }
    .grid { display: grid; gap: 8px; grid-template-columns: repeat(6, 1fr); }
    label { font-size: 12px; }
    input { padding: 6px; }
    button { padding: 8px 12px; margin-right: 6px; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    th, td { border-bottom: 1px solid #ddd; padding: 6px; }
    textarea { width: 100%; min-height: 140px; }
  </style>
</head>
<body>

<h1>SWB – kalkulator wyników</h1>
<div class="muted">Ręczne wprowadzanie odpowiedzi (1–5). Automatyczne obliczenia.</div>

<div class="card">
  <button onclick="calculate()">Oblicz</button>
  <button onclick="clearAll()">Wyczyść</button>
</div>

<div class="card">
  <div class="grid" id="inputs"></div>
</div>

<div class="card">
  <h2>Wyniki</h2>
  <table>
    <thead>
      <tr>
        <th>Skala</th>
        <th>Średnia</th>
        <th>z</th>
        <th>Kategoria</th>
      </tr>
    </thead>
    <tbody id="results"></tbody>
  </table>
  <h3>Raport</h3>
  <textarea id="report" readonly></textarea>
</div>

<script>
const reverse = new Set([1,6,8,10,11,12,13,17,18,20,21,22,23,26,28,29,30,31,33]);
const scales = [
  {name:"Integracja", items:[1,2,3,4,5,6,7], M:3.67, SD:0.66},
  {name:"Akceptacja", items:[8,9,10,11,12,13,14], M:3.04, SD:0.64},
  {name:"Wkład", items:[15,16,17,18,19,20], M:3.55, SD:0.62},
  {name:"Aktualizacja", items:[21,22,23,24,25,26,27], M:3.22, SD:0.62},
  {name:"Spójność", items:[28,29,30,31,32,33], M:3.57, SD:0.61},
  {name:"Wynik ogólny", items:Array.from({length:33},(_,i)=>i+1), M:3.40, SD:0.47}
];

const inputs = document.getElementById("inputs");
for(let i=1;i<=33;i++){
  inputs.innerHTML += `<div><label>I${i}</label><input id="i${i}" type="number" min="1" max="5"></div>`;
}

function calculate(){
  let X = {};
  for(let i=1;i<=33;i++){
    let v = Number(document.getElementById("i"+i).value);
    if(!v) return alert("Uzupełnij wszystkie pozycje");
    X[i] = reverse.has(i) ? 6-v : v;
  }

  let out = "";
  let table = "";
  scales.forEach(s=>{
    let mean = s.items.reduce((a,i)=>a+X[i],0)/s.items.length;
    let z = (mean - s.M)/s.SD;
    let cat = z<=-1 ? "niski" : z>=1 ? "wysoki" : "przeciętny";
    table += `<tr><td>${s.name}</td><td>${mean.toFixed(2)}</td><td>${z.toFixed(2)}</td><td>${cat}</td></tr>`;
    out += `${s.name}: ${mean.toFixed(2)}, z=${z.toFixed(2)}, ${cat}\n`;
  });
  document.getElementById("results").innerHTML = table;
  document.getElementById("report").value = out;
}

function clearAll(){
  for(let i=1;i<=33;i++) document.getElementById("i"+i).value="";
  document.getElementById("results").innerHTML="";
  document.getElementById("report").value="";
}
</script>

</body>
</html>
